.. _lfs_prepare:

==================
LFS准备工作
==================

.. note::

   中文社区翻译的LFS文档在2024年3月1日发布翻译版本12.1已经紧跟官方文档，非常方便实践，主要参考

.. note::

   LFS分为两个分支:

   - `Linux From Scratch 版本 12.1-systemd-中文翻译版 发布于 2024 年 3 月 1 日 <https://lfs.xry111.site/zh_CN/12.1-systemd/>`_
   - `Linux From Scratch 版本 12.1-中文翻译版 发布于 2024 年 3 月 1 日 <https://lfs.xry111.site/zh_CN/12.1/>`_

   考虑到我的底座系统是为了运行 :ref:`kvm` 和 :ref:`docker` ，没有复杂的主机服务，纯粹是运行环境，所以我目前采用 sysv 版本

.. warning::

   实际上官方文档包括中文版已经非常严谨，理论上按照文档一步步走下来必然能够完成构建。所以我不是完整摘抄文档，而是做一些笔记，以便后续能够自己重复完成，并且构建自动完成系统，定制能够充分发挥我的现有硬件性能的系统。

   请参考管官方文档为准，本章节是一些笔记和自己的补充信息

目标架构
=============

LFS的目标架构是 AMD/Intel 的 x86(32位) 和 x86_64(64位) CPU (需要修订一些指令才能适用于Power PC和 :ref:`arm` 架构的CPU)。

构建LFS至少需要一个现有的Linux系统:

- 可以是一个已经正在运行的Linux系统，现代Linux发行版(需要较新版本，对内核有和工具链有要求)
- 也可以是某个发行版的LiveCD运行一个编译环境，例如我就使用 :ref:`fedora` 的一个LiveCD来完成，具体是通过 :ref:`create_vm` 运行Fedoraa LiveCD系统来编译构建

32位 vs. 64位
----------------

- LFS官方文档是构建纯粹的64位系统，也就是值运行64位可执行程序 
- 如果要构建 ``multi-lib`` 系统(同时支持32位和64位)则需要两次编译很多应用(考虑到现代硬件需要巨大的内存，远超4GB，所以我也按照官方文档构建 **纯粹64位系统** 以便获得一个精简的能够用于物理主机host底座的OS)

软件包选择
=============

**LFS的目标是构建一个完整且基本可用的系统** ，但是LFS并不是最小可用系统，因为LFS中有一些软件包并不是必须安装的(具体列表见 `LFS vi. 本书选择软件包的逻辑 <https://lfs.xry111.site/zh_CN/12.1/prologue/package-choices.html>`_ )

勘误和安全公告
======================

- `LFS 12.1 勘误表列出的所有修正项 <https://www.linuxfromscratch.org/lfs/errata/12.1/>`_
- `LFS 12.1 手册发布后发现的安全缺陷列表 <https://www.linuxfromscratch.org/lfs/advisories/>`_ 请根据安全公告建议在构建过程中对相关操作进行修正

  - **要将 LFS 系统实际用作桌面或服务器系统，那么即使在 LFS 系统构建完成后，也要继续关注安全公告并修复列出的所有安全缺陷**

参考
======

- `Linux From Scratch 版本 12.1-中文翻译版 发布于 2024 年 3 月 1 日 <https://lfs.xry111.site/zh_CN/12.1/>`_
