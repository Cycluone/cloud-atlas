.. _base_os:

===============
基础操作系统
===============

发行版选择
==================

在选择作为Host OS的操作系统时，我主要权衡考虑如下因素：

- 内核足够新，能够充分体验最新的Linux技术，同时又保持一定的稳定性
  - 在虚拟化技术和容器技术迅速发展的今天，内核是决定性因素，Ubuntu LTS采用 4.x 系列，而即将发行的RHEL 8也将采用4.x
  - RedHat Enterprise Linux 和 CentOS 面向企业应用，当前正式版本是 7.x ，在内核上比较保守谨慎，采用的是3.10系列内核
  - 考虑到应用程序稳定性和兼容性，需要采用Ubuntu LTS或者RHEL/CentOS，由于当前RHEL 8尚未发布，所以比较之下倾向于采用Ubuntu LTS
- 支持应用程序兼容性
  - 由于作为服务器运行，应用程序兼容性及其重要，例如 :ref:`nvidia-docker` 官方只支持 LTS 而不支持 masteer release

RedHat Enterprise Linux 和 CentOS 面向企业应用，在内核上比较保守谨慎，采用的是3.10系列内核，不能满足我对Host内核的要求。所以我不准备在Host上使用，而是在Guest上使用来验证生产环境的方案。

Ubuntu在内核上选择比较积极，采用的是 4.x 系列内核，并且由于紧跟社区发展，采用了相对新颖（略不稳定）的发布包。适合我体验最新的技术。所以我在发行版上选择Ubuntu。

版本选择
==============

.. warning::

   最初我选择 ``Xubuntu 18.10 Stable`` ，确实具有很新的内核以及灵活的桌面，但是在实际部署云计算系统中，依然遇到了一些矛盾的问题：

   - NVIDIA的 ``nvidia-docker`` 只支持Ubuntu LTS发行版
   - 实际工作中使用桌面太折腾并且很难完善Hibernate的休眠，反而是字符界面更为稳定
   - 18.10不是LTS版本，也就是支持的时间范围有限(2019年7月结束)，我尝试升级到19.4版本以便能够不断滚动采用最新stable，但是遇到了非常不稳定的字符终端花屏问题无法解决。不过，Ubuntu大版本升级还是有参考价值的，后续在新的LTS发布后，可参考 :ref:`upgrade_ubuntu_from_18.10_to_19.04` 进行版本升级。

我建议采用字符终端模式来运行Ubuntu LTS Server，因为Linux对Mac硬件的支持不够完美，需要花费大量时间精力来解决硬件问题，和我们实践服务器集群技术的目标偏离较远。当然，如果你主要将Linux作为自己日常桌面使用，或许在非Mac系列硬件上会有比较好的体验。
