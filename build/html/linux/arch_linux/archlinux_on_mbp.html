<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MacBook Pro上运行Arch Linux &mdash; Cloud Atlas 0.1 文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sphinxnotes-strike.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="copyright" title="版权所有" href="../../copyright.html" />
    <link rel="next" title="ThinkPad X220上运行Arch Linux" href="archlinux_on_thinkpad_x220.html" />
    <link rel="prev" title="最佳Arch Linux发行版" href="best_archlinux.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Cloud Atlas
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../studio/index.html">Studio Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infrastructure/index.html">Infrastructure Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/index.html">DevOps Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kvm/index.html">KVM Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph/index.html">Ceph Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gluster/index.html">Gluster Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ovirt/index.html">oVirt Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openstack/index.html">OpenStack Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker/index.html">Docker Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kubernetes/index.html">Kubernetes Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kubernetes_from_scratch/index.html">Kubernetes From Scratch (KFS) Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rancher/index.html">Rancher Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openshift/index.html">OpenShift Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sql/index.html">SQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlite/index.html">SQLite Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mysql/index.html">MySQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pgsql/index.html">PostgreSQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nosql/index.html">NoSQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../redis/index.html">Redis Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../network/index.html">Network Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infra_service/index.html">Infra-Service Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infra_search/index.html">Search Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../info_service/index.html">Info-Service Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/index.html">Web Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../big_data/index.html">Big Data Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machine_learning/index.html">Machine Learning Atlas</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux Atlas</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../best_linux.html">最佳Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/index.html">Linux系统管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../redhat_linux/index.html">RedHat Linux</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Arch Linux</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="best_archlinux.html">最佳Arch Linux发行版</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MacBook Pro上运行Arch Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">安装</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arch-linux">安装arch linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">配制</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uefi">UEFI启动</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nvidia">Nvidia显卡</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">屏幕亮度</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suspend">Suspend</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">内核参数</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">屏幕分辨率相关设置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_on_thinkpad_x220.html">ThinkPad X220上运行Arch Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_on_thinkpad_x220_u_disk.html">ThinkPad X220上运行Arch Linux(U盘)</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_config_ip.html">arch linux配置IP(静态或动态)</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_wpa_supplicant.html">arch linux使用wpa_supplicant连接无线网络</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_sway.html">archlinux Sway图形桌面</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_chinese.html">arch linux中文环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_ms_fonts.html">Arch Linux Windows字体</a></li>
<li class="toctree-l3"><a class="reference internal" href="pacman.html">Pacman</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_aur.html">Arch Linux AUR</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_snap.html">Arch Linux运行snap</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_alsa.html">Arch Linux ALSA声音系统</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_hibernates.html">Arch Linux Hibernates</a></li>
<li class="toctree-l3"><a class="reference internal" href="alien_convert_package.html">alien转换安装包</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_developer.html">Arch Linux开发环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="xmodmap.html">Xmodmap修改键盘映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="dropbox.html">Arch Linux上使用Dropbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="cross_compile.html">交叉编译</a></li>
<li class="toctree-l3"><a class="reference internal" href="archlinux_wine.html">ArchLinux平台wine环境运行Windows程序</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../asahi_linux/index.html">Asahi Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gentoo_linux/index.html">Gentoo Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lfs_linux/index.html">LFS(Linux from scratch)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ubuntu_linux/index.html">Ubuntu Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suse_linux/index.html">SUSE Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kali_linux/index.html">Kali Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tails_linux/index.html">Tails Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postmarketos/index.html">postmarketOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../container_os/index.html">容器化操作系统(Container OS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fedora_coreos/index.html">Fedora CoreOS容器操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chromium_os/index.html">Chromium OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpine_linux/index.html">Alpine Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subgraph_os/index.html">Subgraph OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kaios/index.html">KaiOS - 世界第三手机操作系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compute/index.html">Linux计算</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Linux存储</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Linux网络</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/index.html">Linux服务器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.html">Linux安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="../desktop/index.html">Linux桌面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linux_tablet/index.html">Linux平板</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel/index.html">Kernel Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance/index.html">Performance Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../distributed_system/index.html">Distributed System Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shell/index.html">Shell Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../django/index.html">Django Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript/index.html">JavaScript Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nodejs/index.html">Node.js Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../golang/index.html">Go Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../swift/index.html">Swift Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm/index.html">ARM Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../android/index.html">Android Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bsd/index.html">BSD Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apple/index.html">Apple Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../windows/index.html">Windows Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../real/index.html">Real Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../management/index.html">Management Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../life/index.html">Life Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate.html">捐赠</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../thanks.html">感谢</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/index.html">附录</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Cloud Atlas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Linux Atlas</a> &raquo;</li>
          <li><a href="index.html">Arch Linux</a> &raquo;</li>
      <li>MacBook Pro上运行Arch Linux</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/linux/arch_linux/archlinux_on_mbp.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="macbook-proarch-linux">
<span id="archlinux-on-mbp"></span><h1>MacBook Pro上运行Arch Linux<a class="headerlink" href="#macbook-proarch-linux" title="Permalink to this heading">¶</a></h1>
<section id="id1">
<h2>安装<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>MacBook Pro上先安装macOS，然后调整磁盘，空出空间给Arch Linux安装。安装完成后，实现双启动。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Mac设备的Firemware update依赖macOS的系统更新，所以如果完全铲除了macOS系统只保留Linux，则无法更新firmware。我保留了128G空间给macOS一方面能够及时更新firmware，另一方面也能够随时切换回macOS系统做iOS/macOS开发。</p>
</div>
<section id="macos">
<h3>安装macOS<a class="headerlink" href="#macos" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>重命名U盘:</p></li>
</ul>
<p>可以使用Disk Utility工具将U盘格式化成一个命名为`CatalinaInstaller`的U盘符</p>
<ul>
<li><p>输入以下命令创建macOS安装U盘:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Install</span>\ <span class="n">macOS</span>\ <span class="n">Catalina</span><span class="o">.</span><span class="n">app</span><span class="o">/</span><span class="n">Contents</span><span class="o">/</span><span class="n">Resources</span><span class="o">/</span><span class="n">createinstallmedia</span> <span class="o">--</span><span class="n">volume</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">CatalinaInstaller</span> <span class="o">--</span><span class="n">nointeraction</span>
</pre></div>
</div>
</li>
<li><p>macOS安装非常直观，只需要插入U盘，按住command键，然后按电源键启动，就可以选择从U盘启动，然后格式化磁盘，将mcaOS安装到MacBook Pro上。</p></li>
</ul>
<section id="id2">
<h4>macOS分区调整<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<p>默认安装的macOS会占据整个磁盘，为了能够安装Linux，我们需要收缩macOS分区。使用的工具就是macOS的Disk Utilities。</p>
<ul class="simple">
<li><p>添加新的分区</p></li>
</ul>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/diskutil_partition.png"><img alt="../../_images/diskutil_partition.png" src="../../_images/diskutil_partition.png" style="width: 720.0px; height: 443.7px;" /></a>
</figure>
<p>注意一定要添加分区，不能添加卷。添加卷实际上是macOS APFS文件系统内部的子卷，只有添加分区才能收缩现有的macOS所在分区。</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/diskutil_partition_1.png"><img alt="../../_images/diskutil_partition_1.png" src="../../_images/diskutil_partition_1.png" style="width: 720.0px; height: 409.5px;" /></a>
</figure>
<ul class="simple">
<li><p>点击 <code class="docutils literal notranslate"><span class="pre">+</span></code> 按钮添加一个分区，然后按住以下截图中饼图上箭头所指的调整分区的圆点旋转调整两个分区的大小。例如，我调整Linux分区到400G，保留Mac分区100G。</p></li>
</ul>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/diskutil_partition_2.png"><img alt="../../_images/diskutil_partition_2.png" src="../../_images/diskutil_partition_2.png" style="width: 720.0px; height: 442.8px;" /></a>
</figure>
<p>新创建的分区格式可以任选，反正安装Linux时候还会删除重新创建。</p>
</section>
</section>
<section id="u">
<h3>安装U盘制作<a class="headerlink" href="#u" title="Permalink to this heading">¶</a></h3>
<p>如果是macOS平台制作启动U盘，则执行如下命令创建安装U盘:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hdiutil</span> <span class="n">convert</span> <span class="o">-</span><span class="nb">format</span> <span class="n">UDRW</span> <span class="o">-</span><span class="n">o</span> <span class="n">archlinux</span><span class="o">-</span><span class="mf">2019.10.01</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">img</span> <span class="n">archlinux</span><span class="o">-</span><span class="mf">2019.10.01</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">iso</span>
<span class="n">sudo</span> <span class="n">dd</span> <span class="k">if</span><span class="o">=</span><span class="n">archlinux</span><span class="o">-</span><span class="mf">2019.10.01</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">dmg</span> <span class="n">of</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">rdisk3</span> <span class="n">bs</span><span class="o">=</span><span class="mi">10</span><span class="n">m</span>
</pre></div>
</div>
<p>如果是Linux平台制作启动U盘，则执行如下命令创建安装U盘:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dd</span> <span class="k">if</span><span class="o">=</span><span class="n">archlinux</span><span class="o">-</span><span class="mf">2019.10.01</span><span class="o">-</span><span class="n">x86_64</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">dmg</span> <span class="n">of</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span> <span class="n">bs</span><span class="o">=</span><span class="mi">10</span><span class="n">M</span>
</pre></div>
</div>
</section>
</section>
<section id="arch-linux">
<h2>安装arch linux<a class="headerlink" href="#arch-linux" title="Permalink to this heading">¶</a></h2>
<p>在MacBook Pro上安装arch linux遇到的第一个问题是无线网卡无法识别。类似 <a class="reference internal" href="../ubuntu_linux/ubuntu_on_mbp.html#ubuntu-on-mbp"><span class="std std-ref">MacBook Pro上运行Ubuntu</span></a> 由于Broadcom的授权限制，发行版不能携带Broadcom BCM4360 802.11ac无线网卡设备驱动。</p>
<p>解决方法是先采用USB网卡连接Internet，先完成操作系统安装，然后再安装 <code class="docutils literal notranslate"><span class="pre">broadcom-wl-dkms</span></code> 软件包来支持无线网卡。</p>
<ul>
<li><p>更新时钟:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">timedatectl</span> <span class="nb">set</span><span class="o">-</span><span class="n">ntp</span> <span class="n">true</span>
</pre></div>
</div>
</li>
<li><p>磁盘分区:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parted</span> <span class="o">-</span><span class="n">a</span> <span class="n">optimal</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span>
</pre></div>
</div>
</li>
</ul>
<p>此时 <code class="docutils literal notranslate"><span class="pre">print</span></code> 显示分区还是之前在macOS下划分的分区:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Model</span><span class="p">:</span> <span class="n">ATA</span> <span class="n">APPLE</span> <span class="n">SSD</span> <span class="n">SM0512</span> <span class="p">(</span><span class="n">scsi</span><span class="p">)</span>
<span class="n">Disk</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span><span class="p">:</span> <span class="mi">500</span><span class="n">GB</span>
<span class="n">Sector</span> <span class="n">size</span> <span class="p">(</span><span class="n">logical</span><span class="o">/</span><span class="n">physical</span><span class="p">):</span> <span class="mi">512</span><span class="n">B</span><span class="o">/</span><span class="mi">4096</span><span class="n">B</span>
<span class="n">Partition</span> <span class="n">Table</span><span class="p">:</span> <span class="n">gpt</span>
<span class="n">Disk</span> <span class="n">Flags</span><span class="p">:</span>

<span class="n">Number</span>  <span class="n">Start</span>   <span class="n">End</span>    <span class="n">Size</span>   <span class="n">File</span> <span class="n">system</span>  <span class="n">Name</span>                  <span class="n">Flags</span>
 <span class="mi">1</span>      <span class="mf">20.5</span><span class="n">kB</span>  <span class="mi">210</span><span class="n">MB</span>  <span class="mi">210</span><span class="n">MB</span>  <span class="n">fat32</span>        <span class="n">EFI</span> <span class="n">System</span> <span class="n">Partition</span>  <span class="n">boot</span><span class="p">,</span> <span class="n">esp</span>
 <span class="mi">2</span>      <span class="mi">210</span><span class="n">MB</span>   <span class="mi">100</span><span class="n">GB</span>  <span class="mi">100</span><span class="n">GB</span>
 <span class="mi">3</span>      <span class="mi">100</span><span class="n">GB</span>   <span class="mi">500</span><span class="n">GB</span>  <span class="mi">400</span><span class="n">GB</span>                                     <span class="n">msftdata</span>
</pre></div>
</div>
<p>删除分区3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="mi">3</span>
</pre></div>
</div>
<p>重新创建分区3，分区大小50GB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkpart</span> <span class="n">primary</span> <span class="n">ext4</span> <span class="mi">100</span><span class="n">GB</span> <span class="mi">150</span><span class="n">GB</span>
<span class="n">name</span> <span class="mi">3</span> <span class="n">arch_linux</span>
</pre></div>
</div>
<ul>
<li><p>格式化文件系统:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkfs</span><span class="o">.</span><span class="n">ext4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span>
</pre></div>
</div>
</li>
<li><p>挂载文件系统:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda3</span> <span class="o">/</span><span class="n">mnt</span>
<span class="n">mkdir</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">boot</span>
<span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">boot</span>
</pre></div>
</div>
</li>
<li><p>选择镜像网站</p></li>
</ul>
<p>arch linux的镜像网站定义在 <code class="docutils literal notranslate"><span class="pre">/etc/pacman.d/mirrorlist</span></code> 。在这个定义文件中，越靠前的网站优先级越高，所以建议将地理位置最近的网站列到最前面。例如，在中国，可以选择163镜像网站。</p>
<ul>
<li><p>安装基本软件包:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacstrap</span> <span class="o">/</span><span class="n">mnt</span> <span class="n">base</span> <span class="n">linux</span> <span class="n">linux</span><span class="o">-</span><span class="n">firmware</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id3">
<h2>配制<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>fstab: 生成fstab文件(这里 <code class="docutils literal notranslate"><span class="pre">-U</span></code> 或 <code class="docutils literal notranslate"><span class="pre">-L</span></code> 定义UUID或labels):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">genfstab</span> <span class="o">-</span><span class="n">U</span> <span class="o">/</span><span class="n">mnt</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span>
</pre></div>
</div>
</li>
<li><p>chroot: 将根修改到新系统:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">arch</span><span class="o">-</span><span class="n">chroot</span> <span class="o">/</span><span class="n">mnt</span>
</pre></div>
</div>
</li>
<li><p>设置时区:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">sf</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">zoneinifo</span><span class="o">/</span><span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">localtime</span>
</pre></div>
</div>
</li>
</ul>
<p>运行 <code class="docutils literal notranslate"><span class="pre">hwclock</span></code> 生成 <code class="docutils literal notranslate"><span class="pre">/etc/cadjtime</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hwclock</span> <span class="o">--</span><span class="n">systohc</span>
</pre></div>
</div>
<ul>
<li><p>本地化语言支持 - 只需要UTF支持就可以，所以修改 <code class="docutils literal notranslate"><span class="pre">/etc/locale.gen</span></code> 保留 <code class="docutils literal notranslate"><span class="pre">en_US.UTF-8</span> <span class="pre">UTF-8</span></code> 然后执行:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">locale</span><span class="o">-</span><span class="n">gen</span>
</pre></div>
</div>
</li>
</ul>
<p>创建 <code class="docutils literal notranslate"><span class="pre">locale.conf</span></code> 设置如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LANG</span><span class="o">=</span><span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<ul>
<li><p>创建 <code class="docutils literal notranslate"><span class="pre">/etc/hostname</span></code> 内容是主机名:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xcloud</span>
</pre></div>
</div>
</li>
<li><p>编辑 <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">127.0.0.1</span>    <span class="n">localhost</span>
<span class="mf">127.0.1.1</span>    <span class="n">xcloud</span><span class="o">.</span><span class="n">huatai</span><span class="o">.</span><span class="n">me</span>  <span class="n">xcloud</span>
</pre></div>
</div>
</li>
<li><p>设置root密码:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">passwd</span>
</pre></div>
</div>
</li>
<li><p>设置日常帐号:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groupadd</span> <span class="o">-</span><span class="n">g</span> <span class="mi">20</span> <span class="n">staff</span>
<span class="n">useradd</span> <span class="o">-</span><span class="n">g</span> <span class="mi">20</span> <span class="o">-</span><span class="n">u</span> <span class="mi">501</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">huatai</span> <span class="o">-</span><span class="n">m</span> <span class="n">huatai</span>
<span class="n">passwd</span> <span class="n">huatai</span>
</pre></div>
</div>
</li>
<li><p>设置sudo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">sudo</span>
<span class="n">echo</span> <span class="s2">&quot;huatai   ALL=(ALL:ALL) NOPASSWD:ALL&quot;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sudoers</span>
</pre></div>
</div>
</li>
<li><p>之前在 <a class="reference internal" href="archlinux_on_thinkpad_x220.html#archlinux-on-thinkpad-x220"><span class="std std-ref">ThinkPad X220上运行Arch Linux</span></a> 遇到默认内核没有加载Vfat模块导致无法读取EFI分区,编辑 <code class="docutils literal notranslate"><span class="pre">/etc/mkinitcpio.conf</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MODULES</span><span class="o">=</span><span class="p">(</span><span class="n">vfat</span> <span class="n">xfs</span><span class="p">)</span>
<span class="n">BINARIES</span><span class="o">=</span><span class="p">(</span><span class="n">fsck</span> <span class="n">fsck</span><span class="o">.</span><span class="n">ext2</span> <span class="n">fsck</span><span class="o">.</span><span class="n">ext3</span> <span class="n">fsck</span><span class="o">.</span><span class="n">ext4</span> <span class="n">e2fsck</span> <span class="n">fsck</span><span class="o">.</span><span class="n">vfat</span> <span class="n">fsck</span><span class="o">.</span><span class="n">msdos</span> <span class="n">fsck</span><span class="o">.</span><span class="n">fat</span> <span class="n">fsck</span><span class="o">.</span><span class="n">xfs</span> <span class="n">xfs_repair</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>然后安装软件包:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">dosfstools</span> <span class="n">xfsprogs</span>
</pre></div>
</div>
<p>再重新生成initramfs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkinitcpio</span> <span class="o">-</span><span class="n">P</span>
</pre></div>
</div>
<section id="id4">
<h3>安装必要软件包<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>使用pacman安装必要软件包:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">vim</span> <span class="n">which</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="uefi">
<h2>UEFI启动<a class="headerlink" href="#uefi" title="Permalink to this heading">¶</a></h2>
<p>在EFI系统中，实际上并不需要安装Grub这样的启动管理系统就可以启动Linux，只需要在EFI中设置启动顺序。</p>
<ul>
<li><p>安装 efibootmgr</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">efibootmgr</span>
</pre></div>
</div>
</li>
</ul>
<p>参考 <a class="reference external" href="https://wiki.archlinux.org/index.php/EFISTUB#Using_UEFI_directly">EFISTUB - Using UEFI directly</a> 执行如下命令:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">efibootmgr</span> <span class="o">--</span><span class="n">disk</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span> <span class="o">--</span><span class="n">part</span> <span class="mi">1</span> <span class="o">--</span><span class="n">create</span> <span class="o">--</span><span class="n">label</span> <span class="s2">&quot;Arch Linux&quot;</span> <span class="o">--</span><span class="n">loader</span> <span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="n">linux</span> <span class="o">--</span><span class="n">unicode</span> <span class="s1">&#39;root=PARTUUID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX rw initrd=\initramfs-linux.img&#39;</span> <span class="o">--</span><span class="n">verbose</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><code class="docutils literal notranslate"><span class="pre">PARTUUID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</span></code> 设置PARTUUID参数请检查 <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-lh</span> <span class="pre">/dev/disk/by-partuuid/</span></code> 目录下设备文件的软链接，可以找到对应磁盘 <code class="docutils literal notranslate"><span class="pre">/dev/sda1</span></code> 的 PARTUUID。请注意，PARTUUID和磁盘UUID不同，在 <code class="docutils literal notranslate"><span class="pre">/etc/fstab</span></code> 中使用的是UUID。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>默认安装的arch linux内核不支持vfat文件系统，而EFI分区就是vfat，所以在前面重新构建initfs，将vfat支持加入。这个步骤非常重要，否则系统启动时会报错 <code class="docutils literal notranslate"><span class="pre">mount:</span> <span class="pre">/new_root:</span> <span class="pre">unknown</span> <span class="pre">filesystem</span> <span class="pre">type</span> <span class="pre">'vfat'</span></code> 。</p>
</div>
<ul>
<li><p>设置启动顺序:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">efibootmgr</span> <span class="o">--</span><span class="n">bootorder</span> <span class="n">XXXX</span><span class="p">,</span><span class="n">XXXX</span> <span class="o">--</span><span class="n">verbose</span>
</pre></div>
</div>
</li>
</ul>
<p>这里 <code class="docutils literal notranslate"><span class="pre">xxxx,xxxx</span></code> 是刚才 <code class="docutils literal notranslate"><span class="pre">efibootmgr</span> <span class="pre">--verbose</span></code> 输出的每个启动项的编号。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>现在重启操作系统，则立即进入Arch Linux系统。那么如何启动macOS呢？</p>
<p>Mac硬件系统有一个 <code class="docutils literal notranslate"><span class="pre">option</span></code> 键提供了EFI启动选择，在按下电源键同时安装 <code class="docutils literal notranslate"><span class="pre">option</span></code> 键，就会出现启动操作系统的选项。不过Mac的 <code class="docutils literal notranslate"><span class="pre">option</span></code> 键启动看不到Linux分区，所以这里只能作为重新启动macOS的方法。</p>
<p>以上就可以满足macOS和Arch Linux的双启动设置需求。</p>
</div>
</section>
<section id="nvidia">
<h2>Nvidia显卡<a class="headerlink" href="#nvidia" title="Permalink to this heading">¶</a></h2>
<p>我的笔记本MacBook 是 2013年底版本，属于 MacBook Pro 11,x 系列。从 <code class="docutils literal notranslate"><span class="pre">dmidecode</span></code> 可以看到:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">System</span> <span class="n">Information</span>
     <span class="n">Manufacturer</span><span class="p">:</span> <span class="n">Apple</span> <span class="n">Inc</span><span class="o">.</span>
     <span class="n">Product</span> <span class="n">Name</span><span class="p">:</span> <span class="n">MacBookPro11</span><span class="p">,</span><span class="mi">3</span>
</pre></div>
</div>
<ul>
<li><p>检查显卡:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lspci</span> <span class="o">-</span><span class="n">k</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">A</span> <span class="mi">2</span> <span class="o">-</span><span class="n">E</span> <span class="s2">&quot;(VGA|3D)&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">01</span><span class="p">:</span><span class="mf">00.0</span> <span class="n">VGA</span> <span class="n">compatible</span> <span class="n">controller</span><span class="p">:</span> <span class="n">NVIDIA</span> <span class="n">Corporation</span> <span class="n">GK107M</span> <span class="p">[</span><span class="n">GeForce</span> <span class="n">GT</span> <span class="mi">750</span><span class="n">M</span> <span class="n">Mac</span> <span class="n">Edition</span><span class="p">]</span> <span class="p">(</span><span class="n">rev</span> <span class="n">a1</span><span class="p">)</span>
 <span class="n">Subsystem</span><span class="p">:</span> <span class="n">Apple</span> <span class="n">Inc</span><span class="o">.</span> <span class="n">GK107M</span> <span class="p">[</span><span class="n">GeForce</span> <span class="n">GT</span> <span class="mi">750</span><span class="n">M</span> <span class="n">Mac</span> <span class="n">Edition</span><span class="p">]</span>
     <span class="n">Kernel</span> <span class="n">driver</span> <span class="ow">in</span> <span class="n">use</span><span class="p">:</span> <span class="n">nouveau</span>
</pre></div>
</div>
<p>当前是开源驱动 <code class="docutils literal notranslate"><span class="pre">nouveau</span></code> ，性能较差。</p>
<p>对于 GeForce 600-900 以及 Quadro/Tesla/Tegra K系列显卡，或者更新的显卡(2010-2019年)，安装 <code class="docutils literal notranslate"><span class="pre">nvidia</span></code> 或 <code class="docutils literal notranslate"><span class="pre">nvidia-lts</span></code> 驱动包:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">nvidia</span>
</pre></div>
</div>
<p>安装完成后需要重启系统，因为 <code class="docutils literal notranslate"><span class="pre">nvidia</span></code> 软件包包含屏蔽 <code class="docutils literal notranslate"><span class="pre">nouveau</span></code> 模块配置，所以需要重启。</p>
</section>
<section id="id5">
<h2>屏幕亮度<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>对于 <a class="reference internal" href="archlinux_on_thinkpad_x220.html#archlinux-on-thinkpad-x220"><span class="std std-ref">ThinkPad X220上运行Arch Linux</span></a> 是默认就可以通过屏幕亮度调节键直接调整亮度，这个屏幕亮度值是通过设置 <code class="docutils literal notranslate"><span class="pre">/sys/class/backlight/gmux_backlight/brightness</span></code> 来调整的。不过，对于Nvidia显卡，直接调整这个值不生效，需要以 <code class="docutils literal notranslate"><span class="pre">root</span></code> 身份执行以下命令:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setpci</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">H1</span> <span class="o">-</span><span class="n">s</span> <span class="mi">00</span><span class="p">:</span><span class="mf">01.00</span> <span class="n">BRIDGE_CONTROL</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>然后调整就能够生效。</p>
<p>通过 <a class="reference internal" href="archlinux_aur.html#archlinux-aur"><span class="std std-ref">Arch Linux AUR</span></a> 安装 <code class="docutils literal notranslate"><span class="pre">gmux_backlight</span></code> 软件包之后，就可以以普通用户身份调整屏幕亮度，即修改 <code class="docutils literal notranslate"><span class="pre">/sys/class/backlight/gmux_backlight/brightness</span></code> 。</p>
</section>
<section id="suspend">
<h2>Suspend<a class="headerlink" href="#suspend" title="Permalink to this heading">¶</a></h2>
<p>从 Linux Kernel 3.13 开始支持 Suspend(内核 3.12 从suspend唤醒时屏幕没有背光，只能使用 hibernate)，但是需要禁止USB唤醒功能，否则会导致suspend之后立即又恢复工作。执行以下命令将 <code class="docutils literal notranslate"><span class="pre">XHC1</span></code> 设置到 <code class="docutils literal notranslate"><span class="pre">/proc/acpi/wakeup</span></code> 就可以关闭:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">XHC1</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">acpi</span><span class="o">/</span><span class="n">wakeup</span>
</pre></div>
</div>
<p>这个内核proc在设置之后， <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/proc/acpi/wakeup</span></code> 输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DeviceS</span><span class="o">-</span><span class="n">state</span>  <span class="n">Status</span>   <span class="n">Sysfs</span> <span class="n">node</span>
<span class="o">...</span>
<span class="n">XHC1</span>  <span class="n">S3</span><span class="o">*</span><span class="n">disabled</span>  <span class="n">pci</span><span class="p">:</span><span class="mi">0000</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">14.0</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>不过，依然需要关闭蓝牙鼠标连接，否则鼠标移动还是可能会唤醒系统。但至少不再无法suspend了。</p>
</div>
</section>
<section id="id6">
<h2>内核参数<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h2>
<p>参考 <a class="reference external" href="https://wiki.archlinux.org/index.php/MacBookPro11,x#Kernel_parameters">Arch Linux社区文档 - MacBookPro11,x#Kernel parameters</a> ，实际上要设置 <a class="reference internal" href="archlinux_hibernates.html#archlinux-hibernates"><span class="std std-ref">Arch Linux Hibernates</span></a>  还需要传递参数 <code class="docutils literal notranslate"><span class="pre">acpi_osi=Darwin</span></code> 。这是因为从内核 4.17.2-1 开始，增加了 <code class="docutils literal notranslate"><span class="pre">acpi_osi</span></code> 参数空值会导致电池无法检测到。此外，添加了 <code class="docutils literal notranslate"><span class="pre">acpi_osi</span></code> 内核参数还可以增加电池寿命。</p>
<p>由于需要传递 <code class="docutils literal notranslate"><span class="pre">acpi_mask_gpe=0x06</span></code> 内核参数避免有时候迅速增加的终端寄存器值导致某个CPU核心达到100%。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>确实我发现 <code class="docutils literal notranslate"><span class="pre">dmesg</span> <span class="pre">-T</span></code> 现实启动有Apple相关的ACPI报错，并且我也遇到过莫名其妙的系统负载极高现象，应该和上述内核参数相关。</p>
</div>
<p>完整 <code class="docutils literal notranslate"><span class="pre">efi</span></code> 命令如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">efibootmgr</span> <span class="o">--</span><span class="n">disk</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span> <span class="o">--</span><span class="n">part</span> <span class="mi">1</span> <span class="o">--</span><span class="n">create</span> <span class="o">--</span><span class="n">label</span> <span class="s2">&quot;Arch Linux&quot;</span> <span class="o">--</span><span class="n">loader</span> <span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="n">linux</span> <span class="o">--</span><span class="n">unicode</span> <span class="s1">&#39;root=PARTUUID=c31f68cd-97f7-4471-93c7-adb62b22a17b rw initrd=\initramfs-linux.img resume=UUID=e38d80cc-4044-4d34-b730-1f0c874ad765 swap_file_offset=7798784 acpi_osi=Darwin acpi_mask_gpe=0x06&#39;</span> <span class="o">--</span><span class="n">verbose</span>
</pre></div>
</div>
</section>
<section id="id7">
<h2>屏幕分辨率相关设置<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h2>
<p>MacBook Pro的屏幕分辨率极高，默认情况下Linux运行时字体都显示过小，在xfce桌面上主要调整如下：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Settings</span> <span class="pre">=&gt;</span> <span class="pre">Appearance</span> <span class="pre">=&gt;</span> <span class="pre">Fonts</span></code> (默认编辑区域文字)
- 设置 <code class="docutils literal notranslate"><span class="pre">Default</span> <span class="pre">Font</span></code> 为 <code class="docutils literal notranslate"><span class="pre">WenQuanYi</span> <span class="pre">Micro</span> <span class="pre">Hei</span> <span class="pre">Regular</span> <span class="pre">13</span></code>
- 设置 <code class="docutils literal notranslate"><span class="pre">Default</span> <span class="pre">Monospace</span> <span class="pre">Font</span></code> 为 <code class="docutils literal notranslate"><span class="pre">WenQuanYi</span> <span class="pre">Micro</span> <span class="pre">Hei</span> <span class="pre">Regular</span> <span class="pre">13</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Settings</span> <span class="pre">=&gt;</span> <span class="pre">Windows</span> <span class="pre">Manager</span> <span class="pre">=&gt;</span> <span class="pre">Style</span> <span class="pre">=&gt;</span> <span class="pre">Theme</span> <span class="pre">=&gt;</span> <span class="pre">Default</span></code>
- 设置 <code class="docutils literal notranslate"><span class="pre">Title</span> <span class="pre">font</span></code> 为 <code class="docutils literal notranslate"><span class="pre">Sans</span> <span class="pre">Bold</span> <span class="pre">13</span></code></p></li>
</ul>
<p>以上设置之后，基本图形功能都可以非常舒畅使用。但是，Firefox浏览器默认显示的自体过小，调整：</p>
<ul class="simple">
<li><p>菜单 <code class="docutils literal notranslate"><span class="pre">Preferences</span> <span class="pre">=&gt;</span> <span class="pre">Language</span> <span class="pre">and</span> <span class="pre">Appearance</span> <span class="pre">=&gt;</span> <span class="pre">Fonts</span> <span class="pre">and</span> <span class="pre">Colors</span></code>
- 设置 <code class="docutils literal notranslate"><span class="pre">Default</span> <span class="pre">front</span></code> 为 <code class="docutils literal notranslate"><span class="pre">Default(FreeSerif)</span> <span class="pre">16</span></code></p></li>
</ul>
<p>但是，上述设置对于WEB页面已经通过CSS设置字体无效，除非你在 <code class="docutils literal notranslate"><span class="pre">Advanced...</span></code> 选项中 <code class="docutils literal notranslate"><span class="pre">去除</span></code> 选择 <code class="docutils literal notranslate"><span class="pre">Allow</span> <span class="pre">pages</span> <span class="pre">to</span> <span class="pre">choose</span> <span class="pre">their</span> <span class="pre">own</span> <span class="pre">fonts,</span> <span class="pre">instead</span> <span class="pre">of</span> <span class="pre">your</span> <span class="pre">selections</span> <span class="pre">above</span></code> 。不过，用自己定义的字体强制覆盖WEB页面自体会导致页面风格破坏。</p>
<p>解决方法是调整Firefox默认页面缩放比例，这个设置没有提供UI菜单，需要在地址栏输入 <code class="docutils literal notranslate"><span class="pre">about:config</span></code> 并回车，然后点击 <code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">accept</span> <span class="pre">the</span> <span class="pre">risk!</span></code> 按钮进入配置。搜索 <code class="docutils literal notranslate"><span class="pre">layout.css.devPixelsPerPx</span></code> ，这个选项默认设置值是 <code class="docutils literal notranslate"><span class="pre">1.0</span></code> ，表示页面显示比例是 100% 。可以调整这个数值，例如 <code class="docutils literal notranslate"><span class="pre">1.5</span></code> 表示显示比例 150%
，以此类推。不过，这个页面显示比例是全局影响，也会导致Firefox的菜单和工具条同步放大，所以也不宜调整过大，我在MacBook Pro上设置 <code class="docutils literal notranslate"><span class="pre">1.5</span></code> 基本已经满足大多数页面浏览。少数页面字体实在过小，只能通过 <code class="docutils literal notranslate"><span class="pre">ctrl</span></code> 加 <code class="docutils literal notranslate"><span class="pre">+</span></code> 按钮临时调整。</p>
</section>
<section id="id8">
<h2>参考<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.archlinux.org/index.php/MacBookPro11,x">Arch Linux社区文档 - MacBookPro11,x</a></p></li>
<li><p><a class="reference external" href="https://wiki.archlinux.org/index.php/NVIDIA">Arch Linux社区文档 - NVIDIA</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="best_archlinux.html" class="btn btn-neutral float-left" title="最佳Arch Linux发行版" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="archlinux_on_thinkpad_x220.html" class="btn btn-neutral float-right" title="ThinkPad X220上运行Arch Linux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html"> 版权所有</a> 2018 - now, Huatai Huang.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <!-- your html code here -->
    <br>
    <p><a href="https://github.com/huataihuang/cloud-atlas/issues">留言和讨论</a>|<a href="https://github.com/huataihuang/cloud-atlas/blob/master/source/donate.rst">请我喝一杯咖啡</a></p>
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>