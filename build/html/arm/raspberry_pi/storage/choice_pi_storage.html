<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>树莓派存储设备选择 &mdash; Cloud Atlas 0.1 文档</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sphinxnotes-strike.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="copyright" title="版权所有" href="../../../copyright.html" />
    <link rel="next" title="USB标准3.x" href="usb_3.html" />
    <link rel="prev" title="Raspberry Pi 存储" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Cloud Atlas
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../studio/index.html">Studio Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infrastructure/index.html">Infrastructure Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devops/index.html">DevOps Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ansible/index.html">Ansible Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kvm/index.html">KVM Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph/index.html">Ceph Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gluster/index.html">Gluster Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ovirt/index.html">oVirt Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openstack/index.html">OpenStack Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docker/index.html">Docker Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kubernetes/index.html">Kubernetes Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openshift/index.html">OpenShift Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sql/index.html">SQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mysql/index.html">MySQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pgsql/index.html">PostgreSQL Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../redis/index.html">Redis Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../network/index.html">Network Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infra_service/index.html">Infra-Service Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../web/index.html">Web Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../big_data/index.html">Big Data Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../machine_learning/index.html">Machine Learning Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../linux/index.html">Linux Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel/index.html">Kernel Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance/index.html">Performance Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../distributed_system/index.html">Distributed System Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Python Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../django/index.html">Django Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../javascript/index.html">JavaScript Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nodejs/index.html">Node.js Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../golang/index.html">Go Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../swift/index.html">Swift Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust Atlas</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">ARM Atlas</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../hardware/index.html">ARM 硬件概述</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/index.html">ARM 架构随想</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../power_manage/index.html">ARM电源管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blackberry/index.html">BlackBerry(黑莓)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Raspberry Pi</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../startup/index.html">树莓派起步</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/index.html">树莓派系统管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network/index.html">树莓派网络</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Raspberry Pi 存储</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">树莓派存储设备选择</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_3.html">USB标准3.x</a></li>
<li class="toctree-l4"><a class="reference internal" href="wd_passport_ssd.html">西部数据Passport SSD移动硬盘</a></li>
<li class="toctree-l4"><a class="reference internal" href="wd_digital_dashboard.html">西部数据SSD存储管理工具: Western Digital Dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_boot_pi_3.html">USB移动存储启动和运行树莓派3</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_boot_ubuntu_pi_4_debug.html">debug: 树莓派4 USB存储启动Ubuntu Server 20.04</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_boot_ubuntu_pi_4.html">树莓派4 USB存储启动Ubuntu Server 20.04</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_boot_kali_pi_4.html">树莓派4 USB存储启动Kali Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="chroot_raspbian.html">chroot Raspbian维护更新</a></li>
<li class="toctree-l4"><a class="reference internal" href="disable_auto_resize.html">关闭自动resize根文件系统</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debug/index.html">树莓派异常排查</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pi_cluster/index.html">Raspberry Pi Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../android/index.html">树莓派运行Android</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pine/index.html">Pine64</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openwrt/index.html">OpenWrt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../build/index.html">ARM编译</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../android/index.html">Android Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bsd/index.html">BSD Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../apple/index.html">Apple Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../windows/index.html">Windows Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../real/index.html">Real Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix/index.html">附录</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../management/index.html">Management Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../life/index.html">Life Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aboutme.html">关于作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../donate.html">捐助</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../thanks.html">感谢</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../roadmap.html">Roadmap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Cloud Atlas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">ARM Atlas</a> &raquo;</li>
          <li><a href="../index.html">Raspberry Pi</a> &raquo;</li>
          <li><a href="index.html">Raspberry Pi 存储</a> &raquo;</li>
      <li>树莓派存储设备选择</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/arm/raspberry_pi/storage/choice_pi_storage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="choice-pi-storage">
<span id="id1"></span><h1>树莓派存储设备选择<a class="headerlink" href="#choice-pi-storage" title="永久链接至标题">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>我感觉树莓派为了降低生产成本，没有集成能够满足桌面性能的存储芯片和接口实在是阉割了做作桌面或者服务器的能力。实际上，ARM的存储性能很弱，我不知道即将推出的苹果ARM架构笔记本/桌面设备如何解决这个存储性能问题。但至少，目前在树莓派，外接USB的移动存储设备是提升系统性能非常重要的环节。</p>
</div>
<p>树莓派主板没有集成存储控制芯片，没有我们熟悉的SATA或m2存储接口，所以需要借用USB接口来实现硬盘存储访问。好在当前树莓派4b已经支持USB3.0接口，至少在访问接口上已经接近 500MB/s ，具有一定的实用性。</p>
<p>默认情况下树莓派Raspberry Pi是从SD卡启动系统的，但是SD卡存储容量有限，如果能够转换成磁盘启动（SSD/HDD）则可以实现一个海量的存储系统。</p>
<p>最初我以为树莓派可以通过扩展卡来支持SATA磁盘，后来参考 <a class="reference external" href="http://www.zdnet.com/article/raspberry-pi-adding-an-ssd-drive-to-the-pi-desktop-kit/">Raspberry Pi: Adding an SSD drive to the Pi-Desktop kit</a> 发现类似的解决方案是通过一种USB连接卡转换成 mSATA 或者 SATA接口，这样就类似于常用的USB接口移动硬盘连接。早期外接机械移动硬盘比较累赘，通过外接转接卡可以获得比较紧凑充满机械风的存储设备。</p>
<p>随着SSD技术进步，现在的外接SSD移动硬盘已经越做越小，摆脱了早期2.5寸移动硬盘的身影。我发现现在已经没有必要购买外接转接卡了，直接连接USB SSD存储器已经非常轻巧紧凑。推荐使用SSD移动存储作为树莓派存储设备。</p>
<p><a class="reference external" href="https://baike.baidu.com/item/mSATA">mSATA</a> 是SATA技术整合在小尺寸装置的接口控制器规范。目前笔记本电脑开始使用这种接口用于固态硬盘。</p>
<p>如果存储连续性数据，例如视频，则需要大量的空间，并且顺序读取情况下机械硬盘和固态存储差距较小，出于成本考虑，依然可以采用传统的机械硬盘。</p>
<section id="id2">
<h2>存储转接卡<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>2018年我购买树莓派3b的时候，SSD存储还比较昂贵并且缺乏大容量规格。那时机械硬盘性价比较高(廉价)，所以我组建树莓派存储时候选择了2.5寸机械硬盘。</p>
<p>另外，为了能够营造出服务器的风格，我选择了 <a class="reference external" href="http://www.suptronics.com/miniPCkits/x820-hardware.html">SupTronics X820扩展卡</a> 作为机械硬盘转接器。</p>
</section>
<section id="usbssd">
<h2>USB外接SSD移动硬盘<a class="headerlink" href="#usbssd" title="永久链接至标题">¶</a></h2>
<p>根据经验和测试 <a class="reference internal" href="wd_passport_ssd.html#wd-passport-ssd"><span class="std std-ref">西部数据Passport SSD移动硬盘</span></a> 可以看到通过USB外接SSD移动硬盘是最佳的存储设备，随机4k写入性能是TF卡的46倍。</p>
<p>所以，作为 <a class="reference internal" href="../../../kubernetes/index.html#kubernetes"><span class="std std-ref">Kubernetes Atlas</span></a> 在ARM设备上部署实现，强烈建议Raspberry Pi采用外接SSD移动硬盘来实现最佳存储性能。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>当前固态存储技术主流已经采用NvME存储，性能比几年前的SSD存储有很大提高。不过，根据 <a class="reference internal" href="usb_3.html#usb-3"><span class="std std-ref">USB标准3.x</span></a> 标准，当前树莓派只提供了USB 3.0接口，接口速度限制是无法充分发挥NvME存储性能的，适合匹配性能弱一个级别的SSD存储(售价也会低很多)。</p>
<p>不过，最近我发现NvME的存储设备大多是USB接口直连不通过转接线，非常类似U盘，所以做得非常小巧，可以比外接USB移动硬盘占用更小的空间。所以，如果要将 <a class="reference internal" href="../pi_cluster/index.html#pi-cluster"><span class="std std-ref">Raspberry Pi Cluster</span></a> 做得更为紧凑美观，推荐采用NvME存储(U盘)。</p>
</div>
</section>
<section id="usbm-2-nvme">
<h2>USB外接M.2 NVMe协议固态硬盘<a class="headerlink" href="#usbm-2-nvme" title="永久链接至标题">¶</a></h2>
<p>当前主流的移动硬盘已经跨越了SATA接口，采用NVMe PCI-E硬盘协议，可以充分发挥固态硬盘芯片的性能。并且设备非常小巧，适合树莓派使用。</p>
<p>我准备在合适的时候购买一款 <code class="docutils literal notranslate"><span class="pre">USB外接M.2</span> <span class="pre">NVMe协议固态硬盘</span></code> 来配合 <a class="reference internal" href="../startup/pi_400.html#pi-400"><span class="std std-ref">树莓派Raspberry Pi 400</span></a> 使用，看能否进一步提高树莓派的性能。</p>
</section>
<section id="usb">
<h2>USB外接机械移动硬盘<a class="headerlink" href="#usb" title="永久链接至标题">¶</a></h2>
<p>如果单纯考虑存储容量，并且主要用于顺序写入，例如视频流，则可以采用外接机械移动硬盘来助力ARM设备存储。我考虑在 <a class="reference internal" href="../../../machine_learning/jetson/jetson_nano.html#jetson-nano"><span class="std std-ref">Jetson Nano开发套件概览</span></a> 上使用以前旧的机械硬盘，来作为存储容量补充。</p>
</section>
<section id="u">
<h2>U盘<a class="headerlink" href="#u" title="永久链接至标题">¶</a></h2>
<p>我在使用 <a class="reference internal" href="../startup/pi_400.html#pi-400"><span class="std std-ref">树莓派Raspberry Pi 400</span></a> 考虑到TF性能有限，所以类似之前在　Raspberry Pi 4B 上使用 <a class="reference internal" href="wd_passport_ssd.html#wd-passport-ssd"><span class="std std-ref">西部数据Passport SSD移动硬盘</span></a> 一样外接USB存储来提高磁盘性能。不过，树莓派400是一款键 盘一体机，连接USB外接磁盘有点累赘，我很久以前购买过一个SDisk的魔豆U盘，非常小巧，当时购买的是最高规格的128G产盘，并且是USB 3.0接口。</p>
<p>不过，我实际测试下来，U盘的随机读写性能很差，4K随机写入速度只有187 IOPS，带宽 750KB/s，甚至还不如使用TF卡的随机IO。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Raspberry Pi 存储" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usb_3.html" class="btn btn-neutral float-right" title="USB标准3.x" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html"> 版权所有</a> 2018 - now, Huatai Huang.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <!-- your html code here -->
    <br>
    <p><a href="https://github.com/huataihuang/cloud-atlas/issues">留言和讨论</a>|<a href="https://github.com/huataihuang/cloud-atlas/blob/master/source/donate.rst">请我喝一杯咖啡</a></p>
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>