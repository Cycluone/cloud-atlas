.. _old_macbook_disk:

====================
旧MacBook磁盘问题
====================

我在使用 :ref:`macos_install_drive` 安装最新的 macOS Big Sur (macOS Version 11.1) 时候，遇到一个非常奇怪的问题：安装提示我系统磁盘存在 S.M.A.R.T. 错误，要立即备份数据替换磁盘，并拒绝安装新系统。

我反复使用Disk Utility进行磁盘检查都没有发现问题，甚至使用U盘安装系统时，重新格式化磁盘(没有报错)，依然在安装过程中提示磁盘S.M.A.R.T. error。

我有些不太相信我的硬件已经故障了，毕竟在之前的旧版本macOS中运行很久也没有遇到问题，磁盘检测也看不到错误。

参考 `S.M.A.R.T. Status is: "Unsupported" on my Internal Hard Drive <https://discussions.apple.com/thread/251209469>`_ 中HWTech说不是所有的Apple SSD都支持SMART，并且对于USB设备，由于macOS没有包含必要的驱动，也会不支持USB磁盘的SMART功能。

根据 `macOS Big Sur is compatible with these computers <https://support.apple.com/en-us/HT211238>`_ 可以看到，我的古老的 MacBook Pro 2013 Late ( :ref:`introduce_my_studio` ) 是macOS Big Sur兼容的最陈旧的设备了(看来无缘下一代操作系统了)。


苹果官方提到 `If you can’t install macOS Big Sur on certain 13-inch MacBook Pro computers from 2013 and 2014 <https://support.apple.com/en-us/HT211242>`_ 需要执行 `reset the SMC <https://support.apple.com/kb/HT201295>`_ (以下步骤为无T2安全芯片的旧款Mac重置SMC方法，新款请看原文):

- 关闭Mac
- 在笔记本内建键盘上同时按下以下按键:

  - 键盘左方的 ``Shift``
  - 键盘左方的 ``Control``
  - 键盘左方的 ``Option(Alt)``

- 在以上3个按键同时按住情况下，按下并保持按住 ``电源按键`` : 同时保持按住4个按键 10 秒钟
- 放开所有按键，然后按下 ``电源按键`` 启动Mac

.. figure:: ../../_static/macos_ios/studio/2016-macbook-keyboard-diagram-smc.png
   :scale: 40

我准备尝试reset SMC方法来解决安装问题，如果不能解决，我准备恢复安装上一个 Catalina版本。

.. note::

   重置系统管理控制器(system management controller, SMC)可以解决很多与电源、电池、风扇等功能相关的问题。

.. note::

   我感觉我的Macbook Pro 2013 late是最新的 Big Sur 支持的最古老的硬件，很可能是勉强运行。此外Big Sur为了兼容Intel和最新的ARM架构M1处理器，相信操作系统是及其复杂的，很多功能可能已经过于叠床架屋了，有可能对旧版本硬件不友好。

   如果不能安装最新版本操作系统，我准备采用稳定的Catalina操作系统。因为我的笔记本用来构建双启动操作系统，主要使用Linux来构建。
