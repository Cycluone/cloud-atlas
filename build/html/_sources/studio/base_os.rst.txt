.. _base_os:

===============
基础操作系统
===============

发行版选择
==================

在选择作为Host OS的操作系统时，我主要权衡考虑如下因素：

- 内核足够新，能够充分体验最新的Linux技术，同时又保持一定的稳定性
  - 在虚拟化技术和容器技术迅速发展的今天，内核是决定性因素，考虑采用 4.x 系列
- 操作系统轻量级，同时能够运行主流的Gnome桌面软件
  - 能够提供浏览器和基本的图形软件即可
  - 将尽可能多的硬件资源投入到虚拟化运行中，充分发挥硬件的性能是每个SA的追求

* 选择操作系统版本

RedHat Enterprise Linux 和 CentOS 面向企业应用，在内核上比较保守谨慎，采用的是3.10系列内核，不能满足我对Host内核的要求。所以我不准备在Host上使用，而是在Guest上使用来验证生产环境的方案。

Ubuntu在内核上选择比较积极，采用的是 4.x 系列内核，并且由于紧跟社区发展，采用了相对新颖（略不稳定）的发布包。适合我体验最新的技术。所以我在发行版上选择Ubuntu。

版本选择
==============

在Ubuntu的具体版本号上，选择 Xubuntu 18.10 Stable:

- 尝试过在Ubuntu Server版本上通过安装 ``xfce4`` 软件包来组件最小化Xfce，但是发现实际上要通过删减组件来降低系统消耗会带来很多意想不到的依赖问题。毕竟发行版经过了大量的测试和修复，短时间内自己手工定制桌面不现实。
- 对比了 ``Xfce4`` 和 ``Budgie`` 桌面，发现实际上还是 ``Xfce4`` 占用的资源较少，甚至只有后者的一半。
- 既然要选择 ``Xfce4`` 不如就直接选择社区面向Xfce4打包的发行版，可以开箱即用，省却自己的很多时间精力。

.. note::

   选择最新的Stable版本18.10：

      - 18.10不是LTS版本，也就是支持的时间范围有限(2019年7月结束)，我计划在之后升级到19.4版本以便能够不断滚动采用最新stable
      - 内核版本 4.18 ，作为Host底座来支持不同的虚拟化技术，在Guest端，将采用比较稳定的LTS版本以及CentOS来实现模拟OpenStack集群
      - 选择18.10 stable版本是为了平衡最新技术和稳定性

   中间曾经折返回Ubuntu Server 18.04 LTS版本，但是实践发现在MacBook Pro笔记本，安装Server版本在驱动上比较保守和麻烦，如果升级HWE内核则实际上也是18.10的内核，所以不如直接安装18.10。

桌面选择
==============

为了能够实现一些基本的的桌面图形环境工作，需要选择一个Desktop版本，这样可以兼顾做一些本地工作，甚至可以将笔记本作为自己的日常工作平台。

选择考虑:

- 轻量级：占用较少的Host主机资源
- 兼容性：兼容Gnome应用程序（目前主流的桌面应用大多基于Gnome）
- 简洁美观：不需要花哨，但是类似现代iOS和Android这样的干净交互界面

尝试过选择 `budgie <https://ubuntubudgie.org>`_ :

- 在Gnome基础上做了精简，舍弃了Gnome shell，但是能够兼容运行Gnome程序
- 界面采用平面化设计，吸收了Android的设计理念，非常雅致；支持类似macOS的dark theme
- 占用内存较少，我采用mini安装（默认只安装Firefox浏览器），初始安装启动后内存占用只有不到700M

但最终还是回到Xfce，因为发现budgie占用内存还是远超了Xfce。在Xfce中，即使启动了libvirtd/Docker服务，内存也只占用400M。我决定把尽可能多的资源用于虚拟化和计算。
