<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>kind集群(Docker in Docker)</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="kind-docker-in-docker">
<span id="kind-cluster"></span><h1>kind集群(Docker in Docker)</h1>
<p>使用 <a class="reference internal" href="docker_in_docker_kind.xhtml#docker-in-docker-kind"><span class="std std-ref">Docker in Docker部署工具kind</span></a> 部署了Kubernetes集群，可以使用 kubectl 与该集群交互。</p>
<p>默认的集群访问配置存储在 <code class="docutils literal notranslate"><span class="pre">${HOME}/.kube/config</span></code> (如果没有设置 <code class="docutils literal notranslate"><span class="pre">$KUBECONFIG</span></code> 环境变量)。</p>
<section id="id1">
<h2>创建集群</h2>
<ul>
<li><p>创建kind集群:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span> <span class="n">create</span> <span class="n">cluster</span>
</pre></div>
</div>
</li>
<li><p>检查kind创建的集群:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span> <span class="n">get</span> <span class="n">clusters</span>
</pre></div>
</div>
</li>
</ul>
<p>可以看到默认创建的集群名称 <code class="docutils literal notranslate"><span class="pre">kind</span></code></p>
<ul>
<li><p>通过 <code class="docutils literal notranslate"><span class="pre">--name</span></code> 参数，可以创建第二个集群:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span> <span class="n">create</span> <span class="n">cluster</span> <span class="o">--</span><span class="n">name</span> <span class="n">kind</span><span class="o">-</span><span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>然后检查可以看到系统创建了2个集群:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span> <span class="n">get</span> <span class="n">clusters</span>
</pre></div>
</div>
</li>
</ul>
<p>输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span>
<span class="n">kind</span><span class="o">-</span><span class="mi">2</span>
</pre></div>
</div>
<p>在创建了2个集群之后，用户目录下 <code class="docutils literal notranslate"><span class="pre">~/.kube/config</span></code> 将包含两个集群访问密钥，为了通过 <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> 访问不同集群，需要使用上下文参数 <code class="docutils literal notranslate"><span class="pre">--context</span></code> ，上下文的名字是 <code class="docutils literal notranslate"><span class="pre">kind-&lt;集群名&gt;</span></code> ，例如 <code class="docutils literal notranslate"><span class="pre">kind-kind</span></code> 和 <code class="docutils literal notranslate"><span class="pre">kind-kind-2</span></code> 。举例，我们访问第二个集群 <code class="docutils literal notranslate"><span class="pre">kind-2</span></code> 使用:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kubectl</span> <span class="o">-</span><span class="n">n</span> <span class="n">kube</span><span class="o">-</span><span class="n">system</span> <span class="n">get</span> <span class="n">pods</span> <span class="o">--</span><span class="n">context</span> <span class="n">kind</span><span class="o">-</span><span class="n">kind</span><span class="o">-</span><span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="id2">
<h2>删除集群</h2>
<p>kind删除集群命令也非常简单:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span> <span class="n">delete</span> <span class="n">cluster</span> <span class="o">--</span><span class="n">name</span> <span class="o">&lt;</span><span class="n">集群名</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>如果没有指定 <code class="docutils literal notranslate"><span class="pre">--name</span></code> 参数，则默认集群context名字 <code class="docutils literal notranslate"><span class="pre">kind</span></code> 将被删除。</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>