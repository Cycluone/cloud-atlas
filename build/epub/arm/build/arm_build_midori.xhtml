<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ARM环境编译midori浏览器</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="armmidori">
<span id="arm-build-midori"></span><h1>ARM环境编译midori浏览器</h1>
<p>在 <a class="reference internal" href="../../machine_learning/jetson/index.xhtml#jetson"><span class="std std-ref">NVIDIA Jetson</span></a> 上使用默认的桌面浏览器chromium会非常消耗资源，即使开启少量页面也会消耗较多内存和CPU，所以一般轻量级工作可以使用较为简单的浏览器midori。</p>
<p>不过，midori没有在Jetson的ubuntu发行版中提供，所以需要从源代码编译。</p>
<ul>
<li><p>安装依赖库:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">cmake</span> <span class="n">valac</span> <span class="n">libwebkit2gtk</span><span class="o">-</span><span class="mf">4.0</span><span class="o">-</span><span class="n">dev</span> <span class="n">libgcr</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">dev</span> <span class="n">libpeas</span><span class="o">-</span><span class="n">dev</span> <span class="n">libsqlite3</span><span class="o">-</span><span class="n">dev</span> <span class="n">libjson</span><span class="o">-</span><span class="n">glib</span><span class="o">-</span><span class="n">dev</span> <span class="n">libarchive</span><span class="o">-</span><span class="n">dev</span> <span class="n">intltool</span> <span class="n">libxml2</span><span class="o">-</span><span class="n">utils</span>
</pre></div>
</div>
</li>
<li><p>编译:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">_build</span>
<span class="n">cd</span> <span class="n">_build</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">usr</span> <span class="o">..</span>
<span class="n">make</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>可以不安装就直接运行midori:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_build</span><span class="o">/</span><span class="n">midori</span>
</pre></div>
</div>
</li>
</ul>
<p>在命令行控制台执行上述 <code class="docutils literal notranslate"><span class="pre">_build/midori</span></code> 会提示错误:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">midori</span><span class="p">:</span><span class="mi">24218</span><span class="p">):</span> <span class="n">dbind</span><span class="o">-</span><span class="n">WARNING</span> <span class="o">**</span><span class="p">:</span> <span class="mi">11</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mf">32.772</span><span class="p">:</span> <span class="n">Couldn</span><span class="s1">&#39;t connect to accessibility bus: Failed to connect to socket /tmp/dbus-l6ig7oOSaG: Connection refused</span>
</pre></div>
</div>
<p>不过，这种方式至少还能正常工作，即能够浏览网站。</p>
<p>但是直接执行 <code class="docutils literal notranslate"><span class="pre">midori</span></code> 程序，则控制台不断提示错误:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">**</span> <span class="p">(</span><span class="n">WebKitWebProcess</span><span class="p">:</span><span class="mi">24924</span><span class="p">):</span> <span class="n">WARNING</span> <span class="o">**</span><span class="p">:</span> <span class="mi">00</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">116</span><span class="p">:</span> <span class="n">AT</span><span class="o">-</span><span class="n">SPI</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">obtain</span> <span class="n">desktop</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">name</span>
<span class="o">**</span> <span class="p">(</span><span class="n">midori</span><span class="p">:</span><span class="mi">24880</span><span class="p">):</span> <span class="n">WARNING</span> <span class="o">**</span><span class="p">:</span> <span class="mi">00</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">117</span><span class="p">:</span> <span class="n">AT</span><span class="o">-</span><span class="n">SPI</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">obtain</span> <span class="n">desktop</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">name</span>
</pre></div>
</div>
<p>并且浏览器窗口无法显示任何内容，总是提示错误 <code class="docutils literal notranslate"><span class="pre">Oops</span> <span class="pre">-</span> <span class="pre">https://www.baidu.com/</span> <span class="pre">Something</span> <span class="pre">went</span> <span class="pre">wrong</span> <span class="pre">with</span> <span class="pre">'https://www.baidu.com/'.</span></code></p>
<p>此时终端输出提示:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MESA-LOADER: failed to open swrast (search paths /usr/lib/aarch64-linux-gnu/dri:\$${ORIGIN}/dri:/usr/lib/dri)
libGL error: failed to load driver: swrast
</pre></div>
</div>
<section id="id1">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/midori-browser/core">GitHub midori browser</a><span class="link-target"> [https://github.com/midori-browser/core]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>