<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Arch Linux上使用Dropbox</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="arch-linuxdropbox">
<span id="arch-linux-dropbox"></span><h1>Arch Linux上使用Dropbox</h1>
<p>Dropbox是目前我使用过最好的网盘:</p>
<ul class="simple">
<li><p>跨平台数据同步：特别是支持Linux操作系统，就远比iCloud同步优秀多了</p></li>
<li><p>数据同步准确迅速：曾经使用过iCloud同步，然而同步延迟以及错综复杂的本地和远程映射导致的数据长时间无法同步，使得我不得不放弃macOS的iCloud文件同步。Dropbox在这方卖弄具有完全的优势。</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>从2019年7月，Dropbox Client build 77.3.127恢复支持ZFS,eCryptfs,xffs和btrfs(2018年11月曾今一度中断了除Ext4以外Linux其他文件系统支持，总算顺应用户要求恢复了多文件系统支持)。</p>
</div>
<section id="dropbox">
<h2>安装Dropbox</h2>
<ul>
<li><p>通过 <a class="reference internal" href="archlinux_aur.xhtml#archlinux-aur"><span class="std std-ref">Arch Linux AUR</span></a> 安装Dropbox:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yay</span> <span class="o">-</span><span class="n">S</span> <span class="n">dropbox</span>
</pre></div>
</div>
</li>
<li><p>安装可选软件包，我根据我使用的 <a class="reference internal" href="../desktop/xfce.xhtml#xfce"><span class="std std-ref">Xfce</span></a> 桌面安装 Thunar 集成:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yay</span> <span class="o">-</span><span class="n">S</span> <span class="n">thunar</span><span class="o">-</span><span class="n">dropbox</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id1">
<h2>使用Dropbox</h2>
<p>安装完成后，通过命令行运行 <code class="docutils literal notranslate"><span class="pre">dropbox</span></code> 或者菜单点击 Dropbox 启动图形界面。会通过WEB引导设置，完成设置后，将自动开始同步数据到 <code class="docutils literal notranslate"><span class="pre">~/Dropbox</span></code> 目录。</p>
<ul>
<li><p>避免dropbox自动升级(即将Dropbox的自动升级目录 <code class="docutils literal notranslate"><span class="pre">~/.dropbox-dist/</span></code> 替换成只读目录)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">~/.</span><span class="n">dropbox</span><span class="o">-</span><span class="n">dist</span>
<span class="n">install</span> <span class="o">-</span><span class="n">dm0</span> <span class="o">~/.</span><span class="n">dropbox</span><span class="o">-</span><span class="n">dist</span>
</pre></div>
</div>
</li>
<li><p>设置自动启动:</p></li>
</ul>
<p>有多种设置自动启动dropbox的方法，可以采用systemd自动启动:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">dropbox</span><span class="nd">@username</span>
</pre></div>
</div>
<p>这里 <code class="docutils literal notranslate"><span class="pre">username</span></code> 请替换成你自己的帐号名。</p>
<p>不过，使用服务方式运行dropbox不会在X window的桌面托盘中显示dropbox图表，则编辑:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">edit</span> <span class="n">dropbox</span><span class="nd">@username</span>
</pre></div>
</div>
<p>添加内容如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Service</span><span class="p">]</span>
<span class="n">Environment</span><span class="o">=</span><span class="n">DISPLAY</span><span class="o">=</span><span class="p">:</span><span class="mi">0</span>
</pre></div>
</div>
<p>然后通过 <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">cat</span> <span class="pre">dropbox&#64;username</span></code> 可以检查服务启动配置。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>上述设置自动启动步骤，我验证在后台启动dropbox没有问题，但是我使用xfce桌面登陆图形界面，还是无法看到托盘中dropbox图标。可能gnome或者kde能够实现，亦或我的步骤中还有问题。</p>
</div>
</section>
<section id="id2">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.archlinux.org/index.php/Dropbox">Arch Linux社区文档 - Dropbox</a><span class="link-target"> [https://wiki.archlinux.org/index.php/Dropbox]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>