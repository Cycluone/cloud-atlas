<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>node-problem-detector</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="node-problem-detector">
<span id="id1"></span><h1>node-problem-detector</h1>
<p>node-problem-detector是处理节点不同问题传递给集群管理栈的上层系统的服务。在每个节点运行的 node-problem-detector 会侦测节点故障，并报告给apiserver。这个 node-problem-detector 可以运行为 DaemonSet 或者独立运行。当前在GCE集群中，node-problem-detector默认作为Kubernetes Addon激活。</p>
<p>node-problem-detector (NPD) 开发的目标是为了解决node运行的大量问题：</p>
<ul class="simple">
<li><p>基础架构服务问题(Infrastructure daemon issues) 例如每个服务器上都需要运行ntp服务，基础服务监控和故障恢复决定了节点是否能够正常工作</p></li>
<li><p>硬件故障(Hardware issues) 例如故障的cpu，内存或者硬盘</p></li>
<li><p>内核异常(Kernel issues) 例如内核死锁，异常的文件系统</p></li>
<li><p>容器运行时异常(Container runtime issues) 例如无响应的运行时daemon</p></li>
</ul>
<p>node-problem-detector 从不同的daemon采集节点问题，然后把这些异常暴露给上层，这样上层 <a class="reference internal" href="#remedy-system"><span class="std std-ref">Remedy Systems(纠正系统)</span></a></p>
<section id="remedy-systems">
<span id="remedy-system"></span><h2>Remedy Systems(纠正系统)</h2>
<p>remedy system是一个用于通过NPD检测出问题后自动实现纠正的进程。remedy system关注node-problem-detector发现的事件或节点状态，并采取行动将Kubernetes集群恢复到健康状态：</p>
</section>
<section id="id2">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/kubernetes/node-problem-detector">node-problem-detector</a><span class="link-target"> [https://github.com/kubernetes/node-problem-detector]</span></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/debug-application-cluster/monitor-node-health/">Monitor Node Health</a><span class="link-target"> [https://kubernetes.io/docs/tasks/debug-application-cluster/monitor-node-health/]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>