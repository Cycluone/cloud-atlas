<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Thanos - Prometheus高可用</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="thanos-prometheus">
<span id="thanos"></span><h1>Thanos - Prometheus高可用</h1>
<p><a class="reference external" href="https://thanos.io">Thanos 提供长期存储能力的高可用Promethous解决方案</a><span class="link-target"> [https://thanos.io]</span> :</p>
<ul class="simple">
<li><p>可以从多个Prometheus服务器和集群聚合查询Prometheus metrics</p></li>
<li><p>通过对象存储实现了无限时间的metrics存储</p></li>
<li><p>支持Prometheus Query API，可以集成Grafana</p></li>
<li><p>通过降低采样可以实现极大跨度范围的查询或者配置复杂的保留策略</p></li>
</ul>
<p>Thanos的解决方案出现主要是为了解决Prometheus的短板：</p>
<ul class="simple">
<li><p>Prometheus没有提供自动本地数据同步，搭建多副本+联邦模式要保持数据一致性表困难</p>
<ul>
<li><p>Prometheus采用Remote Write模式可以在多个节点采用Adapter选主，只推送一份数据到TSDB</p></li>
<li><p>Prometheus采用Remote Write模式，但是不同节点写入不同TSDB，使用Sync在TSDBs之间同步数据确保数据全量</p></li>
<li><p>上述两个方案有侵入性风险，所以类似Thanos或者Victorimetrics采用查询时去重和join，通过全局视图来实现大规模高可用展示查询。</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>Thanos采用滚动发布方式，每6周发布一个小版本迭代，所以请注意关注项目发布情况，采用最新版本部署以便解决可能存在的问题。</p>
</div>
<section id="id1">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://blog.csdn.net/tzs_1041218129/article/details/110211801">一文详解 Prometheus 的高可用方案：Thanos</a><span class="link-target"> [https://blog.csdn.net/tzs_1041218129/article/details/110211801]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>