<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>crictl</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="crictl">
<span id="id1"></span><h1>crictl</h1>
<p><code class="docutils literal notranslate"><span class="pre">crictl</span></code> 是CRI兼容容器runtime的命令行接口。可以通过 <code class="docutils literal notranslate"><span class="pre">crictl</span></code> 在Kubernetes节点检查( <code class="docutils literal notranslate"><span class="pre">inspect</span></code> )和debug容器runtime和应用程序。</p>
<section id="cri-tools">
<h2>安装cri-tools</h2>
<ul>
<li><p>安装crictl:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>VERSION=&quot;v1.17.0&quot;
wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/crictl-$VERSION-linux-amd64.tar.gz
sudo tar zxvf crictl-$VERSION-linux-amd64.tar.gz -C /usr/local/bin
rm -f crictl-$VERSION-linux-amd64.tar.gz
</pre></div>
</div>
</li>
<li><p>安装critest:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>VERSION=&quot;v1.17.0&quot;
wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/critest-$VERSION-linux-amd64.tar.gz
sudo tar zxvf critest-$VERSION-linux-amd64.tar.gz -C /usr/local/bin
rm -f critest-$VERSION-linux-amd64.tar.gz
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id2">
<h2>使用crictl</h2>
<p><code class="docutils literal notranslate"><span class="pre">crictl</span></code> 命令默认连接到 <code class="docutils literal notranslate"><span class="pre">unix:///var/run/dockershim.sock</span></code> 如果要连接到其他runtimes，需要设置 endpoint:</p>
<ul class="simple">
<li><p>可以通过命令行参数 <code class="docutils literal notranslate"><span class="pre">--runtime-endpoint</span></code> 和 <code class="docutils literal notranslate"><span class="pre">--image-endpoint</span></code></p></li>
<li><p>可以通过设置环境变量 <code class="docutils literal notranslate"><span class="pre">CONTAINER_RUNTIME_ENDPOINT</span></code> 和 <code class="docutils literal notranslate"><span class="pre">CONTAINER_RUNTIME_ENDPOINT</span></code></p></li>
<li><p>可以通过配置文件的endpoint设置 <code class="docutils literal notranslate"><span class="pre">--config=/etc/crictl.yaml</span></code></p></li>
</ul>
<p>当前配置为 <code class="docutils literal notranslate"><span class="pre">/etc/crictl.yaml</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">runtime</span><span class="o">-</span><span class="n">endpoint</span><span class="p">:</span> <span class="n">unix</span><span class="p">:</span><span class="o">///</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">dockershim</span><span class="o">.</span><span class="n">sock</span>
<span class="n">image</span><span class="o">-</span><span class="n">endpoint</span><span class="p">:</span> <span class="n">unix</span><span class="p">:</span><span class="o">///</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">dockershim</span><span class="o">.</span><span class="n">sock</span>
<span class="n">timeout</span><span class="p">:</span> <span class="mi">10</span>
<span class="n">debug</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>crictl命令案例</h2>
<ul>
<li><p>列出pods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">crictl</span> <span class="n">pods</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id4">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/debug-application-cluster/crictl/">Debugging Kubernetes nodes with crictl</a><span class="link-target"> [https://kubernetes.io/docs/tasks/debug-application-cluster/crictl/]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>