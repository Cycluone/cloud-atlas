<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>macOS故障恢复</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="macos">
<span id="macos-recovery"></span><h1>macOS故障恢复</h1>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果你的Mac系统由于错误操作导致操作系统摧毁，同时又没有做过Time Machine备份，也没有安装介质。此时，只要你有联网环境，苹果提供了一种在线恢复出厂系统的方法，非常适合最后的故障救援。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>实际上我在铲除系统之前，已经完整作了数据备份，所以恢复出厂macOS没有任何数据丢失。如果你要采用我介绍的这个方法，请务必做好数据备份。</p>
</div>
<p>2020年底，随着macOS 11.1 big Sur进入第二个迭代版本，我考虑将我使用了7年的MacBook Pro 2013 Late升级到最新的，也是最后一个可升级最新版本。根据 <a class="reference external" href="https://support.apple.com/en-us/HT211238">macOS Big Sur is compatible with these computers</a><span class="link-target"> [https://support.apple.com/en-us/HT211238]</span> 可以看到，我的古老的 MacBook Pro 2013 Late ( <a class="reference internal" href="../../studio/introduce_my_studio.xhtml#introduce-my-studio"><span class="std std-ref">模拟云计算的Studio</span></a>  ) 是macOS Big Sur兼容的最陈旧的设备了(看来无缘下一代操作系统了)。</p>
<p>但是，我在使用 <a class="reference internal" href="../studio/macos_install_drive.xhtml#macos-install-drive"><span class="std std-ref">macOS启动安装U盘</span></a> 安装最新的 macOS Big Sur (macOS Version 11.1) 时候，遇到一个非常奇怪的问题：安装提示我系统磁盘存在 S.M.A.R.T. 错误，要立即备份数据替换磁盘，并拒绝安装新系统。</p>
<p>我反复使用Disk Utility进行磁盘检查都没有发现问题，甚至使用U盘安装系统时，重新格式化磁盘(没有报错)，依然在安装过程中提示磁盘S.M.A.R.T. error。</p>
<p>我有些不太相信我的硬件已经故障了，毕竟在之前的旧版本macOS中运行很久也没有遇到问题，磁盘检测也看不到错误。 参考 <a class="reference external" href="https://discussions.apple.com/thread/251209469">S.M.A.R.T. Status is: “Unsupported” on my Internal Hard Drive</a><span class="link-target"> [https://discussions.apple.com/thread/251209469]</span> 中HWTech说不是所有的Apple SSD都支持SMART，并且对于USB设备，由于macOS没有包含必要的驱动，也会不支持USB磁盘的SMART功能。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>我感觉我的Macbook Pro 2013 late是最新的 Big Sur 支持的最古老的硬件，很可能是勉强运行。此外Big Sur为了兼容Intel和最新的ARM架构M1处理器，相信操作系统是及其复杂的，很多功能可能已经过于叠床架屋了，有可能对旧版本硬件不友好。</p>
<p>由于安装最新big Sur非常折腾，我准备采用稳定的Catalina操作系统。因为我的笔记本用来构建双启动操作系统，主要使用Linux来构建。</p>
</div>
<p>由于无法安装最新Big Sur系统，同时为了验证安装，我又完全铲除了整个操作系统，所以现在我需要通过联网方式来恢复出厂macOS系统。</p>
<section id="id1">
<h2>启动macOS Recovery</h2>
<p>在按下电源键的同时安装以下组合键就能够进入macOS Recovery:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Command</span> <span class="pre">(⌘)-R</span></code> 重装你Mac最近安装的最新macOS系统(推荐)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Option-⌘-R</span></code> 更新到Mac硬件系统能够兼容的最新的macOS系统</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Shift-Option-⌘-R</span></code> 重新安装你购买Mac硬件的随机相同版本的macOS（也就是旧版本）</p></li>
</ul>
</section>
<section id="id2">
<h2>后记</h2>
<p>很不幸，通过 macOS Internet Recovery 安装Mavericks版本，也是同样提示 S.M.A.R.T. Fails，无法选择内置SSD存储进行安装。看来，这台使用了7年的MacBook Pro笔记本硬件寿命到期了，已经无法安装macOS操作系统。</p>
<p>我准备死马当活马，通过Linux系统再延续一段时间:</p>
<ul class="simple">
<li><p>部署 <a class="reference internal" href="../../linux/lfs_linux/index.xhtml#lfs-linux"><span class="std std-ref">LFS(Linux from scratch)</span></a></p></li>
<li><p>验证完整的 <a class="reference internal" href="../../kvm/index.xhtml#kvm"><span class="std std-ref">KVM Atlas</span></a> 虚拟化和 <a class="reference internal" href="../../openstack/index.xhtml#openstack"><span class="std std-ref">OpenStack Atlas</span></a> ，实现一种随时可以拉起整个系统的运行节点，所有运行数据都在远程 <a class="reference internal" href="../../arm/raspberry_pi/pi_cluster/index.xhtml#pi-cluster"><span class="std std-ref">Raspberry Pi Cluster</span></a> 构建的分布式存储中</p>
<ul>
<li><p>主机作为计算节点，不存储持久化数据</p></li>
<li><p>本地存储只做缓存和docker镜像存储</p></li>
</ul>
</li>
</ul>
</section>
<section id="id3">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://support.apple.com/en-us/HT204904">How to reinstall macOS from macOS Recovery</a><span class="link-target"> [https://support.apple.com/en-us/HT204904]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>