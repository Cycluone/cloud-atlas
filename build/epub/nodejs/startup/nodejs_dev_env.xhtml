<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Node.js开发环境</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="node-js">
<span id="nodejs-dev-env"></span><h1>Node.js开发环境</h1>
<p>Node Version Manager (nvm) 是 node.js 的版本管理器，可以工作在任何 POSIX兼容的shell环境，运行于unix, macOS 和 Windoes WSL。</p>
<p>这个工具可以管理和切换 Node.js 版本，以便测试和开发。 （例如，我在使用 <a class="reference external" href="https://hexo.io">hexo</a><span class="link-target"> [https://hexo.io]</span> 作为自己的blog撰写平台，就遇到过部分插件对nodejs版本的兼容性要求）</p>
<section id="nvm">
<h2>安装nvm</h2>
<ul>
<li><p>执行安装脚本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">o</span><span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nvm</span><span class="o">-</span><span class="n">sh</span><span class="o">/</span><span class="n">nvm</span><span class="o">/</span><span class="n">v0</span><span class="o">.</span><span class="mf">38.0</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">bash</span>
</pre></div>
</div>
</li>
</ul>
<p>上述命令脚本将clone一个nvm代码仓库到 <code class="docutils literal notranslate"><span class="pre">~/.nvm</span></code> ，并尝试在profile环境中加入一下内容(我手工加到 <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code> ):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">NVM_DIR</span><span class="o">=</span><span class="s2">&quot;$HOME/.nvm&quot;</span>
<span class="p">[</span> <span class="o">-</span><span class="n">s</span> <span class="s2">&quot;$NVM_DIR/nvm.sh&quot;</span>  <span class="p">]</span> <span class="o">&amp;&amp;</span> \<span class="o">.</span> <span class="s2">&quot;$NVM_DIR/nvm.sh&quot;</span>  <span class="c1"># This loads nvm</span>
<span class="p">[</span> <span class="o">-</span><span class="n">s</span> <span class="s2">&quot;$NVM_DIR/bash_completion&quot;</span>  <span class="p">]</span> <span class="o">&amp;&amp;</span> \<span class="o">.</span> <span class="s2">&quot;$NVM_DIR/bash_completion&quot;</span>  <span class="c1"># This loads nvm bash_completion</span>
</pre></div>
</div>
<ul class="simple">
<li><p>然后执行命令 <code class="docutils literal notranslate"><span class="pre">nvm</span></code> 可以看到输出就是正常完成了安装</p></li>
</ul>
</section>
<section id="node">
<h2>安装node</h2>
<ul>
<li><p>安装最新版本node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">install</span> <span class="n">node</span>
</pre></div>
</div>
</li>
</ul>
<p>默认安装的版本就是current最新版本，输出类似:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Downloading and installing node v15.5.1...
Downloading https://nodejs.org/dist/v15.5.1/node-v15.5.1-darwin-x64.tar.xz...
######################################################################### 100.0%
Computing checksum with shasum -a 256
Checksums matched!
Now using node v15.5.1 (npm v7.3.0)
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">nvm</span></code> 支持在系统中安装多个Node.js版本，例如我们可以同时安装稳定版本，并做切换。我们可以检查所有版本进行选择:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">ls</span><span class="o">-</span><span class="n">remote</span>
</pre></div>
</div>
</li>
</ul>
<p>输出类似:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
       <span class="n">v14</span><span class="o">.</span><span class="mf">14.0</span>
       <span class="n">v14</span><span class="o">.</span><span class="mf">15.0</span>   <span class="p">(</span><span class="n">LTS</span><span class="p">:</span> <span class="n">Fermium</span><span class="p">)</span>
       <span class="n">v14</span><span class="o">.</span><span class="mf">15.1</span>   <span class="p">(</span><span class="n">LTS</span><span class="p">:</span> <span class="n">Fermium</span><span class="p">)</span>
       <span class="n">v14</span><span class="o">.</span><span class="mf">15.2</span>   <span class="p">(</span><span class="n">LTS</span><span class="p">:</span> <span class="n">Fermium</span><span class="p">)</span>
       <span class="n">v14</span><span class="o">.</span><span class="mf">15.3</span>   <span class="p">(</span><span class="n">LTS</span><span class="p">:</span> <span class="n">Fermium</span><span class="p">)</span>
       <span class="n">v14</span><span class="o">.</span><span class="mf">15.4</span>   <span class="p">(</span><span class="n">Latest</span> <span class="n">LTS</span><span class="p">:</span> <span class="n">Fermium</span><span class="p">)</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">0.0</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">0.1</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">1.0</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">2.0</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">2.1</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">3.0</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">4.0</span>
        <span class="n">v15</span><span class="o">.</span><span class="mf">5.0</span>
<span class="o">-&gt;</span>      <span class="n">v15</span><span class="o">.</span><span class="mf">5.1</span>
</pre></div>
</div>
<p>上述可以看到，我们已经安装了最新版本 <code class="docutils literal notranslate"><span class="pre">v15.5.1</span></code> ，而当前稳定版本是 <code class="docutils literal notranslate"><span class="pre">v14.15.4</span></code> (LTS) ，所以我们可以</p>
<ul>
<li><p>指定指定S版本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">install</span> <span class="mf">14.15</span><span class="o">.</span><span class="mi">4</span>
</pre></div>
</div>
</li>
<li><p>安装LTS版本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">install</span> <span class="o">--</span><span class="n">lts</span>
</pre></div>
</div>
</li>
<li><p>检查已经安装的版本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">ls</span>
</pre></div>
</div>
</li>
<li><p>我们可以在运行时指定我们需要运行的node版本，这样很容易进行切换测试:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">exec</span> <span class="o">--</span><span class="n">lts</span> <span class="n">node</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
</li>
</ul>
<p>则可以看到系统切换到LTS版本执行:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Running</span> <span class="n">node</span> <span class="n">latest</span> <span class="n">LTS</span> <span class="o">-&gt;</span> <span class="n">v14</span><span class="o">.</span><span class="mf">15.4</span> <span class="p">(</span><span class="n">npm</span> <span class="n">v6</span><span class="o">.</span><span class="mf">14.10</span><span class="p">)</span>
<span class="n">v14</span><span class="o">.</span><span class="mf">15.4</span>
</pre></div>
</div>
<p>执行结束之后，还会回到默认版本(这里就是current版本 v15.5.1)。</p>
<ul>
<li><p>nvm支持将子shell切换到指定版本(这样后续只要子shell没有关闭，就一直是指定版本):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">use</span> <span class="n">node</span> <span class="o">--</span><span class="n">lts</span>
</pre></div>
</div>
</li>
</ul>
<p>此时看到切换到v14.15.4 LTS版本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Now</span> <span class="n">using</span> <span class="n">node</span> <span class="n">v14</span><span class="o">.</span><span class="mf">15.4</span> <span class="p">(</span><span class="n">npm</span> <span class="n">v6</span><span class="o">.</span><span class="mf">14.10</span><span class="p">)</span>
</pre></div>
</div>
<p>由于处于子shell中，接下来没有指定node版本就会一直使用LTS版本</p>
<ul>
<li><p>要在shell中使用默认的Node版本，使用别名 <code class="docutils literal notranslate"><span class="pre">default</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nvm</span> <span class="n">alias</span> <span class="n">default</span> <span class="mf">14.15</span><span class="o">.</span><span class="mi">4</span>
</pre></div>
</div>
</li>
</ul>
<p>则默认切换到使用 <code class="docutils literal notranslate"><span class="pre">v14.15.4</span></code></p>
</section>
<section id="id1">
<h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/nvm-sh/nvm">GitHub nvm README.md</a><span class="link-target"> [https://github.com/nvm-sh/nvm]</span></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>